<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="../css/weui.min.css">
    <link rel="stylesheet" href="../lib/bootstrap-3.3.7-dist/css/bootstrap.css">
    <link rel="stylesheet" href="../lib/mobileSelect/mobileSelect.css">
    <link rel="stylesheet" href="../css/jquery.spinner.css">
    <link rel="stylesheet" href="../lib/area/style.css">
    <link rel="stylesheet" href="../css/regist.css">
    <link rel="stylesheet" href="../css/common.css">
    <link rel="stylesheet" href="../css/appointment.css">
    <title>预约病例</title>
    <style>
        /* 修改弹窗头部样式 */
        .layui-layer .layui-layer-title {
            color: #ffffff;
            font-size: 1.125rem;
            background-color: #836FFF;
        }
    </style>
</head>
<body>
    <div class="containerOut">
        <div class="headerBar">
            <ul><!-- 步骤流程进度条 -->
                <li class="step1 stepIndex">
                    <p class="stepCont">
                        <span class="stepNum">1</span>
                        <span class="succFlag glyphicon glyphicon-ok"></span>
                    </p>
                    <span class="title">选择方案</span>
                </li>
                <li class="step2 stepIndex">
                    <p class="stepCont">
                        <span class="stepNum">2</span>
                        <span class="succFlag glyphicon glyphicon-ok"></span>
                    </p>
                    <span class="title">信息填写</span>
                </li>
                <li class="step3 stepIndex">
                    <p class="stepCont">
                        <span class="stepNum">3</span>
                        <span class="succFlag glyphicon glyphicon-ok"></span>
                    </p>
                    <span class="title">复印用途</span>
                </li>
                <li class="step4 stepIndex">
                    <p class="stepCont">
                        <span class="stepNum">4</span>
                        <span class="succFlag glyphicon glyphicon-ok"></span>
                    </p>
                    <span class="title">提交支付</span>
                </li>
            </ul>
        </div>
        <div class="containerInner pageCont" id="pageBox">
            <div id="page1" class="stepPage" style="display: block">
                <div class="baseInfo hospitalInfo">
                    <img src="" alt="" class="hospitalIcon">
                    <span class="hospitalName"></span><br>
                    <a href="./hospitalList.html" class="more">更多医院<span class="glyphicon glyphicon-chevron-right"></span></a><br>
                </div>
                <div class="baseInfo">
                    <p class="title">服务方案</p>
                    <div class="formItem">
                        <p class="labTitle"><span class="isRequired">*</span>获取病历方式</p>
                        <div class="content clearfix" id="receiveTypeBox">
                            <label for="left" class="left fl optionAbout">
                                <p class="flag">
                                    <span class="text">方案1</span>
                                </p>
                                <p class="price">邮寄</p>
                                <input class="selectBtn" checked type="radio" id="left" name="plan">
                            </label>
                            <label for="right" class="right fr optionAbout">
                                <p class="flag">
                                    <span class="text">方案2</span>
                                </p>
                                <p class="price">自提</p>
                               <input class="selectBtn" type="radio" id="right" name="plan">
                            </label>
                        </div>
                    </div>
                    <div class="formItem" id="bookTel">
                        <p class="itemTitle labTitle"><span class="isRequired">*</span>预约人手机号码</p>
                        <input type="text" class="placeholderText mobile" placeholder="请输入预约人手机号码">
                    </div>
                    <div class="formItem code" style="position:relative" id="bookCode">
                        <p class="itemTitle labTitle"><span class="isRequired">*</span>验证码</p>
                        <input type="text" class="placeholderText codeText"  placeholder="请输入验证码">
                        <button class="getCodeBtn" onclick= getCode()>获取验证码</button>
                    </div>
                </div>
                <div class="customInfo">
                    <p class="title">咨询方式</p>
                    <div class="formItem clearfix">
                        <img src="../img/userIcon03.jpg" alt="" class="customIcon fl">
                        <p class="customBox fl">
                            <span class="title">业务负责人<span class="name"></span></span><br>
                            <span class="tel"><span class="glyphicon glyphicon-phone-alt telIcon"></span> <span class="text"></span></span>
                        </p>
                    </div>
                </div>
                <div class="tipBox">
                    <p class="tipTitle">方案说明</p><br>
                    <p class="tipText">方案一：</p>
                    <p class="tipText">病案室复印完病历后,下发自提通知给用户,用户收到自提通知后,凭自提码去病案室窗口提取病历(请在病案室工作时间内前往)</p><br>
                    <p class="tipText">方案二：</p>
                    <p class="tipText">为保证及时收到,请确保收件地址准确无误,快递公司由EMS承揽</p>
                </div>
                <div class="agreeRule">
                    <input type="checkbox" checked class="isAgree"> <span class="text">我已阅读并接受</span><a href="javascript:void" class="ruleAbout">《病案复印申请协议》</a>
                </div>
            </div>
            <div id="page2" class="stepPage" style="display: none">
                <div class="baseInfo">
                    <div class="formItem">
                        <p class="labTitle"><span class="isRequired">*</span>姓名<span class="addText">(患者)</span> </p>
                        <input class="placeholderText name" type="text" placeholder="请输入患者姓名">
                    </div>
                    <div class="formItem">
                        <p class="labTitle"><span class="isRequired">*</span>证件号<span class="addText">(患者)</span> </p>
                        <input class="placeholderText papers" type="text" placeholder="请输入患者证件号">
                    </div>
                    <div class="formItem">
                        <p class="labTitle"><span class="isRequired">*</span>住院号</p>
                        <input class="placeholderText hospitalNum" type="text" placeholder="住院号示例: 01500112">
                    </div>
                    <!-- <div class="formItem">
                        <p class="labTitle"><span class="isRequired">*</span>病区/科室</p>
                        <input class="placeholderText companyName" type="text" placeholder="请输入患者病区或科室">
                    </div>
                    <div class="formItem">
                        <p class="labTitle"><span class="isRequired">*</span>出院状态</p>
                        <ul class="zoomList" id="bankBox">
                            <li>已出院</li>
                            <li>未出院</li>
                        </ul>
                    </div> -->
                    <div class="formItem">
                        <p class="labTitle">入院时间</p>
                        <input id="startDate" class="placeholderText" type="text" placeholder="请选择入院时间">
                    </div>
                    <div class="formItem">
                        <p class="labTitle"><span class="isRequired">*</span>出院时间</p>
                        <input id="endDate" class="placeholderText" type="text" placeholder="请选择出院时间">
                    </div>
                    <!-- <div class="formItem phone">
                        <p class="itemTitle labTitle"><span class="isRequired">*</span>预约人手机号码</p>
                        <input type="text" class="placeholderText itemInput mobile" placeholder="请输入预约人手机号码">
                    </div>
                    <div class="formItem code" style="position:relative">
                        <p class="itemTitle labTitle"><span class="isRequired">*</span>验证码</p>
                        <input type="text" class="placeholderText code"  placeholder="请输入验证码">
                        <button class="getCodeBtn" onclick= getCode()>获取验证码</button>
                    </div> -->
                    <div class="formItem">
                        <p class="labTitle"><span class="isRequired">*</span>证件类型</p>
                        <ul class="zoomList" id="papersTypeBox">
                            <li class="checkedItem papersType">身份证</li>
                            <li class="papersType">身份证(代办)</li>
                            <li class="papersType">未成年(代办)</li>
                            <li class="papersType">死亡(代办)</li>
                        </ul>
                    </div>
                    <div class="formItem clearfix">
                        <p class="labTitle addTextBox"><span class="isRequired">*</span>上传资料<br>
                            <span class="addText addText1 show_addText">
                                ( 1.请注意第一张是"患者身份证正面",第二张是"手持身份证正面",第三张是"出院结账发票";2.照片拍照时确保"身份证"所有信息清晰可见;3.照片需免冠,手持身份证正面"五官必须清晰可见",身份证与身体保持平行,并且靠近摄像头,建议不要化妆 )
                            </span>
                            <span class="addText addText2">
                                ( 1.请注意第一张是"代办人身份证正面",第二张是"代办人身份证反面",第三张是"代办人手持身份证正面";2.请注意第四张是"患者身份证正面",第五张是"患者身份证反面",第六张是"授权委托书"3.照片拍照时确保"身份证"所有信息清晰可见; )
                            </span>
                            <span class="addText addText3">
                                ( 1.请注意第一张是"户口本首页",第二张是"监护人手持身份证照片",第三张是"出院结账发票";2.照片拍照时确保"户口本首页、监护人手持身份证照片"所有信息清晰可见;3.照片需免冠,监护人手持身份证照片"五官必须清晰可见",证件与身体保持平行,并且靠近摄像头,建议不要化妆 )
                            </span>
                            <span class="addText addText4">
                                ( 1.请注意第一张是"死亡证明",第二张是"关系证明",第三张是"代办人手持身份证正面";2.照片拍照时确保"身份证"所有信息清晰可见;3.照片需免冠,手持身份证正面"五官必须清晰可见",身份证与身体保持平行,并且靠近摄像头,建议不要化妆 )
                            </span>
                        </p>
                        <!-- 类型1 身份证 -->
                        <div class="uploadBox fl fileBox fileBoxType1 show_uploadBox">
                            <input type="file" class="uploadInput"  onchange="uploadFile($(this),$(this).parent())">
                            <img src="" alt="" class="showImg paitentsID_up">
                            <p class="typeText"><span class="requiredFlag">*</span>患者身份证正面</p>
                        </div>
                        <div class="uploadBox fr fileBox fileBoxType1 show_uploadBox">
                            <input type="file" class="uploadInput"  onchange="uploadFile($(this),$(this).parent())">
                            <img src="" alt="" class="showImg paitentsID_down">
                            <p class="typeText"><span class="requiredFlag">*</span>患者手持身份证正面</p>
                        </div>
                        <div class="uploadBox fl fileBox fileBoxType1 show_uploadBox">
                            <input type="file" class="uploadInput"  onchange="uploadFile($(this),$(this).parent())">
                            <img src="" alt="" class="showImg pay_invoice">
                            <p class="typeText"><span class="requiredFlag">*</span>出院结账发票</p>
                        </div>

                         <!-- 类型2 身份证(代办) -->
                         <div class="uploadBox fl fileBox fileBoxType2">
                            <input type="file" class="uploadInput"  onchange="uploadFile($(this),$(this).parent())">
                            <img src="" alt="" class="showImg agentID_up">
                            <p class="typeText"><span class="requiredFlag">*</span>代办人身份证正面</p>
                        </div>
                        <div class="uploadBox fr fileBox fileBoxType2">
                            <input type="file" class="uploadInput"  onchange="uploadFile($(this),$(this).parent())">
                            <img src="" alt="" class="showImg agentID_down">
                            <p class="typeText"><span class="requiredFlag">*</span>代办人身份证反面</p>
                        </div>
                        <div class="uploadBox fl fileBox fileBoxType2">
                            <input type="file" class="uploadInput"  onchange="uploadFile($(this),$(this).parent())">
                            <img src="" alt="" class="showImg agentID_hand">
                            <p class="typeText"><span class="requiredFlag">*</span>代办人手持身份证</p>
                        </div>
                        <div class="uploadBox fr fileBox fileBoxType2">
                            <input type="file" class="uploadInput"  onchange="uploadFile($(this),$(this).parent())">
                            <img src="" alt="" class="showImg paitentsID_up">
                            <p class="typeText"><span class="requiredFlag">*</span>患者身份证正面</p>
                        </div>
                        <div class="uploadBox fl fileBox fileBoxType2">
                            <input type="file" class="uploadInput"  onchange="uploadFile($(this),$(this).parent())">
                            <img src="" alt="" class="showImg paitentsID_down">
                            <p class="typeText"><span class="requiredFlag">*</span>患者身份证反面</p>
                        </div>
                        <div class="uploadBox fr fileBox fileBoxType2">
                            <input type="file" class="uploadInput"  onchange="uploadFile($(this),$(this).parent())">
                            <img src="" alt="" class="showImg permitText">
                            <p class="typeText"><span class="requiredFlag">*</span>授权委托书</p>
                        </div>

                        <!-- 类型3 未成年代办 -->
                        <div class="uploadBox fl fileBox fileBoxType3">
                            <input type="file" class="uploadInput"  onchange="uploadFile($(this),$(this).parent())">
                            <img src="" alt="" class="showImg houseBook_home">
                            <p class="typeText"><span class="requiredFlag">*</span>户口本首页</p>
                        </div>
                        <div class="uploadBox fr fileBox fileBoxType3">
                            <input type="file" class="uploadInput"  onchange="uploadFile($(this),$(this).parent())">
                            <img src="" alt="" class="showImg guardianID_up">
                            <p class="typeText"><span class="requiredFlag">*</span>监护人手持身份证正面</p>
                        </div>
                        <div class="uploadBox fl fileBox fileBoxType3">
                            <input type="file" class="uploadInput"  onchange="uploadFile($(this),$(this).parent())">
                            <img src="" alt="" class="showImg pay_invoice">
                            <p class="typeText"><span class="requiredFlag">*</span>出院结账发票</p>
                        </div>


                        <!-- 类型4 死亡代办 -->
                        <div class="uploadBox fl fileBox fileBoxType4">
                            <input type="file" class="uploadInput"  onchange="uploadFile($(this),$(this).parent())">
                            <img src="" alt="" class="showImg death_prove">
                            <p class="typeText"><span class="requiredFlag">*</span>死亡证明</p>
                        </div>
                        <div class="uploadBox fr fileBox fileBoxType4">
                            <input type="file" class="uploadInput"  onchange="uploadFile($(this),$(this).parent())">
                            <img src="" alt="" class="showImg relation_prove">
                            <p class="typeText"><span class="requiredFlag">*</span>代办人和患者关系证明</p>
                        </div>
                        <div class="uploadBox fl fileBox fileBoxType4">
                            <input type="file" class="uploadInput"  onchange="uploadFile($(this),$(this).parent())">
                            <img src="" alt="" class="showImg agentID_hand">
                            <p class="typeText"><span class="requiredFlag">*</span>代办人手持身份证</p>
                        </div>
                        <div class="uploadBox fr fileBox fileBoxType4">
                            <input type="file" class="uploadInput"  onchange="uploadFile($(this),$(this).parent())">
                            <img src="" alt="" class="showImg agentID_up">
                            <p class="typeText"><span class="requiredFlag">*</span>代办人身份证正面</p>
                        </div>
                        <div class="uploadBox fl fileBox fileBoxType4">
                            <input type="file" class="uploadInput"  onchange="uploadFile($(this),$(this).parent())">
                            <img src="" alt="" class="showImg agentID_down">
                            <p class="typeText"><span class="requiredFlag">*</span>代办人身份证反面</p>
                        </div>

                    </div>
                </div>
                <div class="receiveInfo">
                    <p class="title">收件人信息</p>
                    <div class="formItem">
                        <p class="labTitle"><span class="isRequired">*</span>&nbsp;收件人姓名</p>
                        <input class="placeholderText receiverName" type="text" placeholder="请输入收件人姓名">
                    </div>
                    <div class="formItem">
                        <p class="labTitle"><span class="isRequired">*</span>&nbsp;联系电话</p>
                        <input class="placeholderText receiverTel" type="text" placeholder="请输入收件人联系电话">
                    </div>
                    <div class="formItem">
                        <p class="labTitle">
                            <span class="isRequired">*</span>&nbsp;收件地址<br>
                            <!-- <span class="addText"> (省市区请在下面选择,不要手动输入)</span> -->
                         </p>
                        <div class="browser">
                            <!--选择地区-->
                            <section class="express-area">
                                <a id="expressArea" href="javascript:void(0)">
                                    <dl>
                                        <!-- <dt> 所在地区</dt> -->
                                        <dd class="areaText">省 > 市 > 区/县</dd>
                                    </dl>
                                </a>
                            </section>
                            <!--选择地区弹层-->
                            <section id="areaLayer" class="express-area-box">
                                <header>
                                    <h3>选择地区</h3>
                                    <a id="backUp" class="back" href="javascript:void(0)" title="返回"></a>
                                    <a id="closeArea" class="close" href="javascript:void(0)" title="关闭"></a>
                                </header>
                                <article id="areaBox">
                                    <ul id="areaList" class="area-list"></ul>
                                </article>
                            </section>
                            <!--遮罩层-->
                            <div id="areaMask" class="mask"></div>
                        </div>
                        <input class="placeholderText receiverAdd" type="text" placeholder="详细地址: 如街道、小区、门牌号、楼栋号">
                    </div>
                </div>
            </div>
            <div id="page3" class="stepPage" style="display: none">
                <div class="baseInfo">
                    <p class="title">复印内容</p>
                    <div class="formItem">
                        <p class="labTitle"><span class="isRequired">*</span>&nbsp;选择复印内容</p>
                        <!-- <table class="table useTable">
                            <thead>
                                <tr>
                                    <td>名称</td>
                                    <td>单价</td>
                                    <td class="amountTitle">数量</td>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="type">常规</td>
                                    <td class="price">￥30</td>
                                    <td class="amount">
                                        <input type="text" class="spinnerExample"/>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="type">其它用途1</td>
                                    <td class="price">￥25</td>
                                    <td class="amount">
                                        <input type="text" class="spinnerExample"/>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="type">其它用途2</td>
                                    <td class="price">￥35</td>
                                    <td class="amount">
                                        <input type="text" class="spinnerExample"/>
                                    </td>
                                </tr>
                               
                            </tbody>
                        </table> -->
                        <ul class="zoomType" id="useType">
                            <!-- 用途列表 -->
                        </ul>
                    </div>
                    <div class="formItem">
                        <p class="labTitle"><span class="isRequired">*</span>复印份数</p>
                        <input class="placeholderText amount" type="number" placeholder="请输入需要复印数量">
                    </div>
                    <div class="formItem">
                        <p class="labTitle">患者留言</p>
                        <textarea class="remarkText" name="" id="" cols="" rows="" placeholder="您对申请的特殊要求 (选填)"></textarea>
                    </div>
                </div>
                <div class="userRule">
                    <input type="checkbox" checked> 我已阅读并接受<a href="javascript:void" class="ruleAbout">《用户使用条款》</a>
                </div>
            </div>
            <div id="page4" class="stepPage" style="display: none">
                <div class="orderInfo expressInfoBox">
                    <p class="title">物流信息</p><br>
                    <div class="content clearfix">
                        <p class="orderItem" id="expressTextList">
                            <span class="labTitle"><span class="expressType"></span><span class="colon">:</span></span>
                        </p>
                       
                    </div>
                </div>
                <div class="orderInfo">
                    <p class="title">申请信息</p><br>
                    <div class="content clearfix">
                        <p class="orderItem">
                            <span class="labTitle">就医医院<span class="colon">:</span></span>
                            <span class="labContent hospitalName"></span>
                        </p>
                        <p class="orderItem">
                            <span class="labTitle">患者姓名<span class="colon">:</span></span>
                            <span class="labContent name"></span>
                        </p>
                        <p class="orderItem">
                            <span class="labTitle">证件类型<span class="colon">:</span></span>
                            <span class="labContent papersType"></span>
                        </p>
                        <p class="orderItem">
                            <span class="labTitle">证件号码<span class="colon">:</span></span>
                            <span class="labContent papersNum"></span>
                        </p>
                        <p class="orderItem">
                            <span class="labTitle">住院号<span class="colon">:</span></span>
                            <span class="labContent hospitalNum"></span>
                        </p>
                        <p class="orderItem startTimeBox">
                            <span class="labTitle">入院时间<span class="colon">:</span></span>
                            <span class="labContent startTime"></span>
                        </p>    
                        <p class="orderItem">
                            <span class="labTitle">出院时间<span class="colon">:</span></span>
                            <span class="labContent endTime"></span>
                        </p>   
                        <p class="orderItem">
                            <span class="labTitle">获取病历方式<span class="colon">:</span></span>
                            <span class="labContent receiveType"></span>
                        </p>   
                        <p class="orderItem">
                            <span class="labTitle">预约人手机号码<span class="colon">:</span></span>
                            <span class="labContent bookTel"></span>
                        </p>   
                        <p class="orderItem addTextBox">
                            <span class="labTitle">患者留言<span class="colon">:</span></span>
                            <span class="labContent addText"></span>
                        </p>   
                        <p class="orderItem">
                            <span class="labTitle">上传图片资料<span class="colon">:</span></span>
                        </p>
                        
                        <!-- 类型1 身份证 -->
                        <div class="orderItem  uploadFile fileBoxType1">
                            <p class="labContent">
                                <img class="showImg paitentsID_up" src='' alt="">
                             </p>
                             <span class="labTitle">患者身份证正面</span>
                         </div>
                        <div class="orderItem  uploadFile fileBoxType1">
                            <p class="labContent">
                                <img class="showImg paitentsID_down" src='' alt="">
                             </p>
                             <span class="labTitle">患者手持身份证正面</span>
                        </div>  
                        <div class="orderItem  uploadFile fileBoxType1">
                            <p class="labContent">
                                <img class="showImg pay_invoice" src='' alt="">
                            </p>
                            <span class="labTitle">出院结账发票</span>
                        </div> 
                        
                        <!-- 类型2 身份证(代办) -->
                        <div class="orderItem  uploadFile fileBoxType2">
                            <p class="labContent">
                                <img class="showImg agentID_up" src='' alt="">
                             </p>
                             <span class="labTitle">代办人身份证正面</span>
                         </div>
                        <div class="orderItem  uploadFile fileBoxType2">
                            <p class="labContent">
                                <img class="showImg agentID_down" src='' alt="">
                             </p>
                             <span class="labTitle">代办人身份证反面</span>
                        </div>  
                        <div class="orderItem  uploadFile fileBoxType2">
                            <p class="labContent">
                                <img class="showImg agentID_hand" src='' alt="">
                            </p>
                            <span class="labTitle">代办人手持身份证</span>
                        </div> 
                        <div class="orderItem  uploadFile fileBoxType2">
                            <p class="labContent">
                                <img class="showImg paitentsID_up" src='' alt="">
                             </p>
                             <span class="labTitle">患者身份证正面</span>
                         </div>
                        <div class="orderItem  uploadFile fileBoxType2">
                            <p class="labContent">
                                <img class="showImg paitentsID_down" src='' alt="">
                             </p>
                             <span class="labTitle">患者身份证反面</span>
                        </div>  
                        <div class="orderItem  uploadFile fileBoxType2">
                            <p class="labContent">
                                <img class="showImg permitText" src='' alt="">
                            </p>
                            <span class="labTitle">授权委托书</span>
                        </div> 

                        <!-- 类型3 未成年代办 -->
                        <div class="orderItem  uploadFile fileBoxType3">
                            <p class="labContent">
                                <img class="showImg houseBook_home" src='' alt="">
                             </p>
                             <span class="labTitle">户口本首页</span>
                         </div>
                        <div class="orderItem  uploadFile fileBoxType3">
                            <p class="labContent">
                                <img class="showImg guardianID_up" src='' alt="">
                             </p>
                             <span class="labTitle">监护人手持身份证正面</span>
                        </div>  
                        <div class="orderItem  uploadFile fileBoxType3">
                            <p class="labContent">
                                <img class="showImg pay_invoice" src='' alt="">
                            </p>
                            <span class="labTitle">出院结账发票</span>
                        </div> 

                        <!-- 类型4 死亡代办 -->
                        <div class="orderItem  uploadFile fileBoxType4">
                            <p class="labContent">
                                <img class="showImg death_prove" src='' alt="">
                             </p>
                             <span class="labTitle">死亡证明</span>
                         </div>
                        <div class="orderItem  uploadFile fileBoxType4">
                            <p class="labContent">
                                <img class="showImg relation_prove" src='' alt="">
                             </p>
                             <span class="labTitle">代办人和患者关系证明</span>
                        </div>  
                        <div class="orderItem  uploadFile fileBoxType4">
                            <p class="labContent">
                                <img class="showImg agentID_hand" src='' alt="">
                            </p>
                            <span class="labTitle">代办人手持身份证</span>
                        </div> 
                        <div class="orderItem  uploadFile fileBoxType4">
                            <p class="labContent">
                                <img class="showImg agentID_up" src='' alt="">
                             </p>
                             <span class="labTitle">代办人身份证正面</span>
                        </div>  
                        <div class="orderItem  uploadFile fileBoxType4">
                            <p class="labContent">
                                <img class="showImg agentID_down" src='' alt="">
                            </p>
                            <span class="labTitle">代办人身份证反面</span>
                        </div> 
                    </div>
                </div>
                <div class="orderInfo">
                    <p class="title">复印用途</p><br>
                    <div class="content">
                        <table class="w100 selectTable">
                            <tbody id="selectTypeBox">
                               <!-- 用途列表 -->
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="orderInfo receiveInfo">
                    <p class="title">收货信息</p><br>
                    <div class="content">
                        <p class="orderItem">
                            <span class="labTitle">收件人<span class="colon">:</span></span>
                            <span class="labContent receiverName"></span>
                        </p>   
                        <p class="orderItem">
                            <span class="labTitle">联系电话<span class="colon">:</span></span>
                            <span class="labContent receiverTel"></span>
                        </p>   
                        <p class="orderItem">
                            <span class="labTitle">收件地址<span class="colon">:</span></span>
                            <span class="labContent receiverAdd"></span>
                        </p>   
                    </div>
                </div>
            </div>
        </div>
        <div class="paymentBox clearfix">
            <span class="fl payInfo submitPay">
                订单金额 : <span class="RMB_flag">￥</span><span class="payAmount"></span>
            </span>
            <a href="javascript:void(0)" class="fr paymentBtn submitPay" id="payBtn">微信支付</a>
            <a href="javascript:void(0)" class="fr paymentBtn " id="nextBtn">下一步</a>
        </div>
    </div>
    <!-- page1 医院公告内容弹窗 -->
    <div id="rulesText" class="commonTip" style="display:none">
        <div class="tipBox">
            <p class="tipTitle">公告</p><br>
            <!-- <p class="firstText">尊敬的患者和家属您好:</p> -->
            <p class="tipText"></p>
        </div>
    </div>
    <!-- page2 用户使用条款弹窗 -->
    <div id="userRuleText" class="commonTip" style="display:none">
        <div class="tipBox">
            <p class="tipTitle">用户使用条款</p><br>
            <p class="firstText">尊敬的患者和家属您好:</p>
            <p class="tipText">方案一：</p>
            <p class="tipText">病案室复印完病历后,下发自提通知给用户,用户收到自提通知后,凭自提码去病案室窗口提取病历(请在病案室工作时间内前往)</p><br>
            <p class="tipText">方案二：</p>
            <p class="tipText">为保证及时收到,请确保收件地址准确无误,快递公司由EMS承揽</p>
            <p class="tipTitle">申请须知</p><br>
            <p class="tipText">方案一：</p>
            <p class="tipText">病案室复印完病历后,下发自提通知给用户,用户收到自提通知后,凭自提码去病案室窗口提取病历(请在病案室工作时间内前往)</p><br>
            <p class="tipText">方案二：</p>
            <p class="tipText">为保证及时收到,请确保收件地址准确无误,快递公司由EMS承揽</p>
            <p class="tipTitle">申请须知</p><br>
            <p class="tipText">方案一：</p>
            <p class="tipText">病案室复印完病历后,下发自提通知给用户,用户收到自提通知后,凭自提码去病案室窗口提取病历(请在病案室工作时间内前往)</p><br>
            <p class="tipText">方案二：</p>
            <p class="tipText">为保证及时收到,请确保收件地址准确无误,快递公司由EMS承揽</p>
            <p class="endText"></p>
        </div>
    </div>
</body>
</html>
<script src="../js/jQuery/jquery-3.4.0.js"></script>
<script src="../lib/layer/layer.js"></script>
<script src="../lib/mobileSelect/mobileSelect.js"></script>
<script src="../lib/mobileSelect/selectDate.js"></script>
<script src="../js/jquery.spinner.js"></script>
<script src="../lib/area/jquery.area.js"></script>
<script src="../js/common.js"></script>
<script>
   
    $(function(){
        // var baseUrl= 'http://49.235.145.4';
        var hospitalId= getUrlParam('hospitalId')?getUrlParam('hospitalId'):"1"; // 没有传入id默认显示id为1的医院
        var openId= getUrlParam('openId'); // 获取用户openid
        var ids= getUrlParam('ids'); // 获取用户组件id
        var pageIndex= getUrlParam('pageIndex'); // 预约列表里传递过来的
        var expressType= getUrlParam('expressType'); // 预约列表里传递过来的
        var orderNo= getUrlParam('orderNo'); // 获取订单ID
        var payPrice= 0;
        var userTypeList= [];
        var copyTotal= 0;
        var provinceAddText= '';
        var infoAddText= '';
        // 获取医院信息方法
        function hospitalInfo(id) {
            $.ajax({
                url: baseUrl+'/api/hospital/'+id,
                type: 'GET',
                success: function(res){
                    // $('.hospitalInfo .hospitalIcon').attr('src','http://49.235.145.4'+res.logo);
                    $('.hospitalInfo .hospitalIcon').attr('src',baseUrl+res.logo);
                    $('.hospitalInfo .hospitalName').text(res.name);
                    $('#rulesText>.tipBox>.tipText').text(res.notice);
                    $('.customInfo .customBox .title>.name').text(res.sender);
                    $('.customInfo .customBox .tel>.text').text(res.senderMobile);
                    $('#page4>.orderInfo>.content>.orderItem>.hospitalName').text(res.name);
                    payPrice= res.prePay;
                }
            })
        }
        
        hospitalInfo(hospitalId);
        if(hospitalId == "1") {
            $('.baseInfo>.more').css('display','block');
        } 

        // 获取复印用途列表
        function getTypeList(id) {
            $.ajax({
                url: baseUrl+'/api/purpose/list?hospitalId='+id,
                type: 'GET',
                success: function(res) {
                    for (let i = 0; i < res.length; i++) {
                        var typeItem= '<li class="type">'+res[i]+'</li>'
                        $('#useType').append(typeItem);
                    }
                }
            })
        }

        getTypeList(hospitalId)

        // 点击下一步
        if(pageIndex == 4) {
            $('#pageBox .stepPage').css('display','none');
            $('#pageBox .stepPage:eq(3)').css('display','block');
            $('.headerBar>ul>li').find('.stepCont>.stepNum').css('display','none'); // 隐藏流程数字
            $('.headerBar>ul>li').find('.stepCont>.succFlag').css('display','block'); // 显示当前完成状态标识
            $('#nextBtn').css('dispay','none');
            applicationInfo(ids); // 根据id查询详情
        }else {
            pageIndex= 1;
        }

        // if(expressType == "02") {
        //     $('#page4>.expressInfoBox').css('display','block');
        //     getExpressInfo(ids);  // 根据id查询物流
        // }
        $('#nextBtn').on('click',function(){
            if(pageIndex<4) {
                if(pageIndex == 1) {
                    var isSelect= $('#receiveTypeBox>.optionAbout>.selectBtn:checked').length;
                    var isAgree= $('.agreeRule>.isAgree:checked').length;
                    var bookTel= $('#bookTel>.mobile').val();
                    var bookCode= $('#bookCode>.codeText').val();

                    if(isSelect == "0") {
                        layer.msg('请选择获取病例方式')
                        return;
                    }
                    if(isAgree == "0") {
                        layer.msg('请勾选病案复印申请协议')
                        return;
                    }

                    if(bookTel == "" || bookTel == "undefined" || bookTel == null) {
                        layer.msg('请输入预约人手机号码');
                        return;
                    }

                    if(bookCode == "" || bookCode == "undefined" || bookCode == null) {
                        layer.msg('请输入验证码');
                        return;
                    }

                    if(isSelect != "0" && isAgree != "0") {
                        var receiveType= $('#receiveTypeBox>.optionAbout>.selectBtn:checked').siblings('.price').text();
                        var showReceiveInfo= false;
                        $('#page4>.orderInfo>.content>.orderItem>.receiveType').text(receiveType);
                        $('#page4>.orderInfo>.content>.orderItem>.bookTel').text(bookTel);
                        if(receiveType == "自提") {
                            showReceiveInfo= false;    
                        }else if(receiveType == "邮寄") {
                            showReceiveInfo= true;
                        }
                        // 判断page2是否需要显示收件地址信息框
                        if(showReceiveInfo) {
                            $('#page2>.receiveInfo').css('display','block')
                        }else {
                            $('#page2>.receiveInfo').css('display','none')
                        }
                    }
                    $('#pageBox .stepPage').css('display','none');
                    $('#pageBox .stepPage:eq('+pageIndex+')').css('display','block');
                    $('.headerBar>ul>li:eq('+pageIndex+')').slice(0,pageIndex+1).find('.stepCont>.stepNum').css('display','none'); // 隐藏流程数字
                    $('.headerBar>ul>li:eq('+pageIndex+')').slice(0,pageIndex+1).find('.stepCont>.succFlag').css('display','block'); // 显示当前完成状态标识
                    pageIndex++;
                }else if(pageIndex == 2) {
                    var name= $('#page2>.baseInfo>.formItem>.name').val();
                    var papers= $('#page2>.baseInfo>.formItem>.papers').val();
                    var hospitalNum= $('#page2>.baseInfo>.formItem>.hospitalNum').val();
                    var beginTime= $('#startDate').val(); // 入院时间
                    var endTime= $('#endDate').val(); // 出院时间
                    var papersType= $('#papersTypeBox>.papersType.checkedItem').text()
                    // 邮寄需要补充收件信息
                    var receiverName= $('#page2>.receiveInfo>.formItem>.receiverName').val();
                    var receiverTel= $('#page2>.receiveInfo>.formItem>.receiverTel').val();
                    var provinceAdd= $('#expressArea>dl>.areaText').text();  
                    provinceAddText= provinceAdd.replace(/>/g,"").replace(/\s/g, "");
                    var infoAdd= $('#page2>.receiveInfo>.formItem>.receiverAdd').val(); //详细地址需要拼接上省市区
                    infoAddText= infoAdd;
                    var receiverAdd= provinceAdd+infoAdd;
                    var isCheck= $('#page2>.receiveInfo').css('display') == "block"?true:false 

                    $('#page4>.orderInfo>.content>.orderItem>.name').text(name);
                    $('#page4>.orderInfo>.content>.orderItem>.papersType').text(papersType);
                    $('#page4>.orderInfo>.content>.orderItem>.papersNum').text(papers);
                    $('#page4>.orderInfo>.content>.orderItem>.hospitalNum').text(hospitalNum);
                    $('#page4>.orderInfo>.content>.orderItem>.startTime').text(beginTime);
                    $('#page4>.orderInfo>.content>.orderItem>.endTime').text(endTime);
                    if(name == '') {
                        layer.msg('请输入患者姓名');
                        return;
                    }
                    if(papers == '') {
                        layer.msg('请输入证件号');
                        return;
                    }
                    if(hospitalNum == '') {
                        layer.msg('请输入住院号');
                        return;
                    }
                    if(endTime == '' || endTime === undefined) {
                        layer.msg('请选择出院时间');
                        return;
                    }
                    if(beginTime == '' || beginTime === undefined) {
                        $('#page4>.orderInfo>.content>.startTimeBox').css('display','none');
                    }

                    if(papersType == "身份证") {
                        // 身份证类型--需要上传的3张图片
                        var paitentsID_up= $('#page2>.baseInfo>.formItem>.fileBoxType1>.paitentsID_up').attr('src'); // 患者身份证正面
                        var paitentsID_down= $('#page2>.baseInfo>.formItem>.fileBoxType1>.paitentsID_down').attr('src'); // 患者身份证反面 
                        var pay_invoice= $('#page2>.baseInfo>.formItem>.fileBoxType1>.pay_invoice').attr('src');  // 出院结账发票
                        if(paitentsID_up == '') {
                            layer.msg('请上传患者身份证正面')
                            return;
                        }else if(paitentsID_down == '') {
                            layer.msg('请上传患者身份证反面')
                            return;
                        }else if(pay_invoice == '') {
                            layer.msg('请上传出院结账发票')
                            return;
                        }
                        $('#page4>.orderInfo>.content>.uploadFile').css('display','none')
                        $('#page4>.orderInfo>.content>.fileBoxType1').css('display','block')
                        $('#page4>.orderInfo>.content>.fileBoxType1>.labContent>.paitentsID_up').attr('src',paitentsID_up);
                        $('#page4>.orderInfo>.content>.fileBoxType1>.labContent>.paitentsID_down').attr('src',paitentsID_down);
                        $('#page4>.orderInfo>.content>.fileBoxType1>.labContent>.pay_invoice').attr('src',pay_invoice);
                    }else if(papersType == "身份证(代办)") {
                        // 身份证代办类型--需要上传的6张图片
                        var agentID_up= $('#page2>.baseInfo>.formItem>.fileBoxType2>.agentID_up').attr('src'); // 代办人身份证正面
                        var agentID_down= $('#page2>.baseInfo>.formItem>.fileBoxType2>.agentID_down').attr('src'); // 代办人身份证反面 
                        var agentID_hand= $('#page2>.baseInfo>.formItem>.fileBoxType2>.agentID_hand').attr('src');  // 代办人手持身份证正面
                        var paitentsID_up= $('#page2>.baseInfo>.formItem>.fileBoxType2>.paitentsID_up').attr('src'); // 患者身份证正面
                        var paitentsID_down= $('#page2>.baseInfo>.formItem>.fileBoxType2>.paitentsID_down').attr('src'); // 患者身份证反面 
                        var permitText= $('#page2>.baseInfo>.formItem>.fileBoxType2>.permitText').attr('src');  // 授权委托书
                        if(agentID_up == '') {
                            layer.msg('请上传代办人身份证正面')
                            return;
                        }else if(agentID_down == '') {
                            layer.msg('请上传代办人身份证反面')
                            return;
                        }else if(agentID_hand == '') {
                            layer.msg('请上传代办人手持身份证正面')
                            return;
                        }else if(paitentsID_up == '') {
                            layer.msg('请上传患者身份证正面')
                            return;
                        }else if(paitentsID_down == '') {
                            layer.msg('请上传患者身份证反面')
                            return;
                        }else if(permitText == '') {
                            layer.msg('请上传授权委托书')
                            return;
                        }

                        $('#page4>.orderInfo>.content>.uploadFile').css('display','none')
                        $('#page4>.orderInfo>.content>.fileBoxType2').css('display','block')
                        $('#page4>.orderInfo>.content>.fileBoxType2>.labContent>.agentID_up').attr('src',agentID_up);
                        $('#page4>.orderInfo>.content>.fileBoxType2>.labContent>.agentID_down').attr('src',agentID_down);
                        $('#page4>.orderInfo>.content>.fileBoxType2>.labContent>.agentID_hand').attr('src',agentID_hand);
                        $('#page4>.orderInfo>.content>.fileBoxType2>.labContent>.paitentsID_up').attr('src',paitentsID_up);
                        $('#page4>.orderInfo>.content>.fileBoxType2>.labContent>.paitentsID_down').attr('src',paitentsID_down);
                        $('#page4>.orderInfo>.content>.fileBoxType2>.labContent>.permitText').attr('src',permitText);
                    }else if(papersType == "未成年(代办)") {
                        // 未成年代办类型--需要上传的3张图片
                        var houseBook_home= $('#page2>.baseInfo>.formItem>.fileBoxType3>.houseBook_home').attr('src'); // 户口本首页
                        var guardianID_up= $('#page2>.baseInfo>.formItem>.fileBoxType3>.guardianID_up').attr('src'); // 监护人手持身份证正面 
                        var pay_invoice= $('#page2>.baseInfo>.formItem>.fileBoxType3>.pay_invoice').attr('src');  // 出院结账发票
                        if(houseBook_home == '') {
                            layer.msg('请上传户口本首页')
                            return;
                        }else if(guardianID_up == '') {
                            layer.msg('请上传监护人手持身份证正面')
                            return;
                        }else if(pay_invoice == '') {
                            layer.msg('请上传出院结账发票')
                            return;
                        }
                        $('#page4>.orderInfo>.content>.uploadFile').css('display','none')
                        $('#page4>.orderInfo>.content>.fileBoxType3').css('display','block')
                        $('#page4>.orderInfo>.content>.fileBoxType3>.labContent>.houseBook_home').attr('src',houseBook_home);
                        $('#page4>.orderInfo>.content>.fileBoxType3>.labContent>.guardianID_up').attr('src',guardianID_up);
                        $('#page4>.orderInfo>.content>.fileBoxType3>.labContent>.pay_invoice').attr('src',pay_invoice);
                    }else if(papersType == "死亡(代办)") {
                        // 死亡代办--需要上传的5张图片
                        var death_prove= $('#page2>.baseInfo>.formItem>.fileBoxType4>.death_prove').attr('src'); // 死亡证明
                        var relation_prove= $('#page2>.baseInfo>.formItem>.fileBoxType4>.relation_prove').attr('src'); // 代办人和患者关系证明 
                        var agentID_hand= $('#page2>.baseInfo>.formItem>.fileBoxType4>.agentID_hand').attr('src');  // 代办人手持身份证
                        var agentID_up= $('#page2>.baseInfo>.formItem>.fileBoxType4>.agentID_up').attr('src'); // 代办人身份证正面
                        var agentID_down= $('#page2>.baseInfo>.formItem>.fileBoxType4>.agentID_down').attr('src'); // 代办人身份证反面
                        if(death_prove == '') {
                            layer.msg('请上传死亡证明')
                            return;
                        }else if(relation_prove == '') {
                            layer.msg('请上传代办人和患者关系证明')
                            return;
                        }else if(agentID_hand == '') {
                            layer.msg('请上传代办人手持身份证')
                            return;
                        }else if(agentID_up == '') {
                            layer.msg('请上传代办人身份证正面')
                            return;
                        }else if(agentID_hand == '') {
                            layer.msg('请上传代办人身份证反面')
                            return;
                        }
                        $('#page4>.orderInfo>.content>.uploadFile').css('display','none')
                        $('#page4>.orderInfo>.content>.fileBoxType4').css('display','block')
                        $('#page4>.orderInfo>.content>.fileBoxType4>.labContent>.death_prove').attr('src',death_prove);
                        $('#page4>.orderInfo>.content>.fileBoxType4>.labContent>.relation_prove').attr('src',relation_prove);
                        $('#page4>.orderInfo>.content>.fileBoxType4>.labContent>.agentID_hand').attr('src',agentID_hand);
                        $('#page4>.orderInfo>.content>.fileBoxType4>.labContent>.agentID_up').attr('src',agentID_up);
                        $('#page4>.orderInfo>.content>.fileBoxType4>.labContent>.agentID_down').attr('src',agentID_down); 
                    }

                    if(isCheck) { // 判断是否要校验收件信息
                        var addInfo= receiverAdd.replace(/\s/g, "")
                            addInfo= addInfo.replace(/>/g,"")
                        $('#page4>.receiveInfo').css('display','block');
                        $('#page4>.receiveInfo>.content>.orderItem>.receiverName').text(receiverName);
                        $('#page4>.receiveInfo>.content>.orderItem>.receiverTel').text(receiverTel);
                        $('#page4>.receiveInfo>.content>.orderItem>.receiverAdd').text(addInfo);
                        if(receiverName == '') {
                            layer.msg('请输入收件人姓名');
                            return;
                        }
                        if(receiverTel == '') {
                            layer.msg('请输入收件人联系电话');
                            return;
                        }
                        if(provinceAdd == '') {
                            layer.msg('请选择收件省市区');
                            return;
                        }
                        if(infoAdd == '') {
                            layer.msg('请输入收件人详细地址');
                            return;
                        }
                        
                    }else {
                        $('#page4>.receiveInfo').css('display','none');
                    }

                    $('#pageBox .stepPage').css('display','none');
                    $('#pageBox .stepPage:eq('+pageIndex+')').css('display','block');
                    $('.headerBar>ul>li:eq('+pageIndex+')').slice(0,pageIndex+1).find('.stepCont>.stepNum').css('display','none'); // 隐藏流程数字
                    $('.headerBar>ul>li:eq('+pageIndex+')').slice(0,pageIndex+1).find('.stepCont>.succFlag').css('display','block'); // 显示当前完成状态标识
                    pageIndex++;
                }else if(pageIndex == "3") {
                    var typeList= $('#useType>li.checkedItem')
                    var amount= $('#page3>.baseInfo>.formItem>.amount').val();
                    var addText= $('#page3>.baseInfo>.formItem>.remarkText').val();
                    var isAgree= $('#page3>.userRule>input:checked').length;
                    copyTotal= amount;
                    var receiveType= $('#receiveTypeBox>.optionAbout>.selectBtn:checked').siblings('.price').text()
                    if(receiveType == "自提") {
                        $('.paymentBox>.payInfo>.payAmount').text(payPrice*amount);
                    }else if(receiveType == "邮寄") {
                        $('.paymentBox>.payInfo>.payAmount').text(payPrice*amount+20);
                    }


                    if(typeList.length == "0") {
                        layer.msg('请选择复印内容');
                        return;
                    }
                    if(amount == "") {
                        layer.msg('请输入需要复印的数量');
                        return;
                    }
                    if(isAgree == "0") {
                        layer.msg('请勾选用户使用条款');
                        return;
                    }

                   for (let i = 0; i < typeList.length; i++) {
                       var type= $(typeList[i]).text()
                       var typeItem= '<tr class="useItem">'+
                                        '<td class="type">'+type+'</td>'+
                                        '<td class="amount">'+'×' +amount+'</td>'+
                                     '</tr>'
                       $('#selectTypeBox').append(typeItem);
                       userTypeList.push(type);
                   }

                   if(addText == '' || addText == "undefined" || addText == null) {
                        $('#page4>.orderInfo>.content>.addTextBox').css('display','none');                
                    }else {
                        $('#page4>.orderInfo>.content>.orderItem>.addText').text(addText);
                    }
                    $('#pageBox .stepPage').css('display','none');
                    $('#pageBox .stepPage:eq('+pageIndex+')').css('display','block');
                    $('.headerBar>ul>li:eq('+pageIndex+')').slice(0,pageIndex+1).find('.stepCont>.stepNum').css('display','none'); // 隐藏流程数字
                    $('.headerBar>ul>li:eq('+pageIndex+')').slice(0,pageIndex+1).find('.stepCont>.succFlag').css('display','block'); // 显示当前完成状态标识
                    $('#nextBtn').css('dispay','none');
                    $('.paymentBox>.submitPay').css('display','block'); 
                    pageIndex++;
                }else if(pageIndex == 4) {
                    
                }

            }else {
                layer.msg('功能开发中...业务办理请联系客服')
                return;
            }
        })


        // 医院公告内容弹窗
        $('.agreeRule').on('click','.ruleAbout',function(){
            layer.open({
                type:'1',
                content: $('#rulesText')
            })
        })

        // 用户使用条款内容弹窗
        $('.userRule').on('click','.ruleAbout',function(){
            layer.open({
                type:'1',
                content: $('#userRuleText')
            })
        })

        // 选择入院时间
        $.selectDate("#startDate",{
            start:2000,
            end:2099,
            select:[2020,5,6],
            title:'入院时间'
        },function (data) {
            var month= "";
            var day= "";
            if(data.month <10 ) {
                month= "0"+data.month;
            }
            if(data.day < 10 ) {
                day= "0"+data.day;
            }
            var beginTime= data.year+'-'+month+'-'+day
            $('#startDate').val(beginTime); // 入院时间      
        });

        $("#startDate").focus(function(){
            document.activeElement.blur();
        });

        // 选择出院时间
        $.selectDate("#endDate",{
            start:2000,
            end:2099,
            select:[2020,5,6],
            title:'出院时间'
        },function (data) {
            var month= "";
            var day= "";
            if(data.month <10 ) {
                month= "0"+data.month;
            }
            if(data.day < 10 ) {
                day= "0"+data.day;
            }
            var endTime= data.year+'-'+month+'-'+day
            $('#endDate').val(endTime); // 出院时间 
        });

        $("#endDate").focus(function(){
            document.activeElement.blur();
        });

        // 收件省市区
        $('#expressArea').focus(function(){
            document.activeElement.blur();
        })
        // page2选择证件类型
        $('.zoomList').on('click','li',function(e){
            var showIndex= $(this).index();
            $('#page2>.baseInfo>.formItem>.addTextBox>.addText').removeClass('show_addText');
            $('#page2>.baseInfo>.formItem>.addTextBox>.addText:eq('+showIndex+')').addClass('show_addText');
            if(showIndex == 0) {
                $('#page2>.baseInfo>.formItem>.uploadBox').removeClass('show_uploadBox')
                $('#page2>.baseInfo>.formItem>.fileBoxType1').addClass('show_uploadBox')
            }else if(showIndex == 1) {
                $('#page2>.baseInfo>.formItem>.uploadBox').removeClass('show_uploadBox')
                $('#page2>.baseInfo>.formItem>.fileBoxType2').addClass('show_uploadBox')
            }else if(showIndex == 2) {
                $('#page2>.baseInfo>.formItem>.uploadBox').removeClass('show_uploadBox')
                $('#page2>.baseInfo>.formItem>.fileBoxType3').addClass('show_uploadBox')
            }else if(showIndex == 3) {
                $('#page2>.baseInfo>.formItem>.uploadBox').removeClass('show_uploadBox')
                $('#page2>.baseInfo>.formItem>.fileBoxType4').addClass('show_uploadBox')
            }
        })
       
        // 复印用途计数
        // $('.spinnerExample').spinner({})

        // 选择复印用途
        $('#useType').on('click','li',function(e){
            $(this).toggleClass('checkedItem');
        })


        // 提交订单并支付
        $('#payBtn').on('click',function(){
            var parameter= {};
            var imgList= [];
            userTypeList= userTypeList.join();
            var hospitalName= $('#page4>.orderInfo>.content>.orderItem>.hospitalName').text();
            var name= $('#page4>.orderInfo>.content>.orderItem>.name').text();
            var papersType= $('#page4>.orderInfo>.content>.orderItem>.papersType').text();
            var papersNum= $('#page4>.orderInfo>.content>.orderItem>.papersNum').text();
            var hospitalNum= $('#page4>.orderInfo>.content>.orderItem>.hospitalNum').text();
            var startTime= $('#page4>.orderInfo>.content>.orderItem>.startTime').text();
            var endTime= $('#page4>.orderInfo>.content>.orderItem>.endTime').text();
            var receiveType= $('#page4>.orderInfo>.content>.orderItem>.receiveType').text();
            var addText= $('#page4>.orderInfo>.content>.orderItem>.addText').text();
            var receiverName= $('#page4>.receiveInfo>.content>.orderItem>.receiverName').text();
            var receiverTel= $('#page4>.receiveInfo>.content>.orderItem>.receiverTel').text();
            var addInfo= $('#page4>.receiveInfo>.content>.orderItem>.receiverAdd').text();
            var payMoney= Number($('.paymentBox>.payInfo>.payAmount').text());
            var bookTel= $('#page4>.orderInfo>.content>.orderItem>.bookTel').text();
            var bookCode= $('#bookCode>.bookText').val(); 

            if(receiveType == "自提") {
                receiveType= "01"
            }else if(receiveType == "邮寄") {
                receiveType= "02"
            }

            if(papersType == "身份证") {
                var paitentsID_up= $('#page4>.orderInfo>.content>.fileBoxType1>.labContent>.paitentsID_up').attr('src');
                var paitentsID_down= $('#page4>.orderInfo>.content>.fileBoxType1>.labContent>.paitentsID_down').attr('src');
                var pay_invoice= $('#page4>.orderInfo>.content>.fileBoxType1>.labContent>.pay_invoice').attr('src');
                papersType= "01";
                imgList= [paitentsID_up,paitentsID_down,pay_invoice].join();
            }else if(papersType == "身份证(代办)") {
                var agentID_up= $('#page4>.orderInfo>.content>.fileBoxType2>.labContent>.agentID_up').attr('src');
                var agentID_down= $('#page4>.orderInfo>.content>.fileBoxType2>.labContent>.agentID_down').attr('src');
                var agentID_hand= $('#page4>.orderInfo>.content>.fileBoxType2>.labContent>.agentID_hand').attr('src');
                var paitentsID_up= $('#page4>.orderInfo>.content>.fileBoxType2>.labContent>.paitentsID_up').attr('src');
                var paitentsID_down= $('#page4>.orderInfo>.content>.fileBoxType2>.labContent>.paitentsID_down').attr('src');
                var permitText= $('#page4>.orderInfo>.content>.fileBoxType2>.labContent>.permitText').attr('src');
                papersType= "02";
                imgList= [agentID_up,agentID_down,agentID_hand,paitentsID_up,paitentsID_down,permitText].join();
            }else if(papersType == "未成年(代办)") {
                var houseBook_home= $('#page4>.orderInfo>.content>.fileBoxType3>.labContent>.houseBook_home').attr('src');
                var guardianID_up= $('#page4>.orderInfo>.content>.fileBoxType3>.labContent>.guardianID_up').attr('src');
                var pay_invoice= $('#page4>.orderInfo>.content>.fileBoxType3>.labContent>.pay_invoice').attr('src');
                papersType= "03";
                imgList= [houseBook_home,guardianID_up,pay_invoice].join();
            }else if(papersType == "死亡(代办)") {
                var death_prove= $('#page4>.orderInfo>.content>.fileBoxType4>.labContent>.death_prove').attr('src');
                var relation_prove= $('#page4>.orderInfo>.content>.fileBoxType4>.labContent>.relation_prove').attr('src');
                var agentID_hand= $('#page4>.orderInfo>.content>.fileBoxType4>.labContent>.agentID_hand').attr('src');
                var agentID_up= $('#page4>.orderInfo>.content>.fileBoxType4>.labContent>.agentID_up').attr('src');
                var agentID_down= $('#page4>.orderInfo>.content>.fileBoxType4>.labContent>.agentID_down').attr('src');
                papersType= "04"; 
                imgList= [death_prove,relation_prove,agentID_hand,agentID_up,agentID_down].join();
            }

            parameter= {
                address:  infoAddText, //详细地址
                appointmentType: papersType, //证件类型-必填
                areaCity: provinceAddText,  // 省市区
                copyAmount: payMoney, // 复印费用-必填
                // createBy: "",
                // createTime: "",
                cyDate: endTime, // 出院时间必填
                deliveryType: receiveType, // 获取病例方式-必填
                filePaths: imgList, // 上传图片-必填
                fprn: hospitalNum, // 住院号-必填
                hospitalCode: hospitalId, // 医院ID-必填
                // mailAmount: "", // 快递费
                // mailCompany: "", // 快递公司 EMS-01 顺丰-02
                // mailNo: "", // 快递单号
                note: addText, // 患者描述
                patientCard: papersNum, //患者证件号码
                patientName: name, // 患者姓名
                // payAmount: "", // 支付费用
                // payStatus: "", // 支付状态
                // payTime: "", // 付款时间
                printContents: userTypeList,// 复印用途-必填
                printNum: copyTotal, // 复印数量-必填
                receiverMobile: receiverTel, //收件人手机 
                receiverName: receiverName, //收件人姓名
                // refundAmount: "", // 退款金额 
                // refundTime: "", // 退款时间
                // refuseReason: "", // 拒绝原因
                // remark: "",
                ryDate: startTime, // 入院时间
                // searchValue: "",
                // status: "", // 订单状态 
                // updateBy: "",
                // updateTime: "",
                wxId: openId, // 微信OPENID-必填
                yyMobile: bookTel, // 预约人手机号码-必填
                code: bookCode // 手机验证码
            }
            createOrder(parameter,orderNo); // 创建订单
        })
    })
</script>
